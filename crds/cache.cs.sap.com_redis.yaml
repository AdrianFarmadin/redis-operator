---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.15.0
  name: redis.cache.cs.sap.com
spec:
  group: cache.cs.sap.com
  names:
    kind: Redis
    listKind: RedisList
    plural: redis
    singular: redis
  scope: Namespaced
  versions:
  - additionalPrinterColumns:
    - jsonPath: .status.state
      name: State
      type: string
    - jsonPath: .metadata.creationTimestamp
      name: Age
      type: date
    name: v1alpha1
    schema:
      openAPIV3Schema:
        description: Redis is the Schema for the redis API
        properties:
          apiVersion:
            description: |-
              APIVersion defines the versioned schema of this representation of an object.
              Servers should convert recognized schemas to the latest internal value, and
              may reject unrecognized values.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
            type: string
          kind:
            description: |-
              Kind is a string value representing the REST resource this object represents.
              Servers may infer this from the endpoint the client submits requests to.
              Cannot be updated.
              In CamelCase.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
            type: string
          metadata:
            type: object
          spec:
            description: RedisSpec defines the desired state of Redis
            properties:
              affinity:
                $ref: '#/definitions/k8s.io~1api~1core~1v1~0Affinity'
              binding:
                description: BindingProperties models custom properties for the generated
                  binding secret
                properties:
                  template:
                    type: string
                type: object
              metrics:
                description: MetricsProperties models attributes of the metrics exporter
                  sidecar
                properties:
                  enabled:
                    type: boolean
                  monitor:
                    properties:
                      additionalLabels:
                        additionalProperties:
                          type: string
                        type: object
                      enabled:
                        type: boolean
                      honorLabels:
                        type: boolean
                      interval:
                        description: |-
                          Duration is a valid time duration that can be parsed by Prometheus model.ParseDuration() function.
                          Supported units: y, w, d, h, m, s, ms
                          Examples: `30s`, `1m`, `1h20m15s`, `15d`
                        pattern: ^(0|(([0-9]+)y)?(([0-9]+)w)?(([0-9]+)d)?(([0-9]+)h)?(([0-9]+)m)?(([0-9]+)s)?(([0-9]+)ms)?)$
                        type: string
                      metricRelabelings:
                        items:
                          description: |-
                            RelabelConfig allows dynamic rewriting of the label set for targets, alerts,
                            scraped samples and remote write samples.


                            More info: https://prometheus.io/docs/prometheus/latest/configuration/configuration/#relabel_config
                          properties:
                            action:
                              default: replace
                              description: |-
                                Action to perform based on the regex matching.


                                `Uppercase` and `Lowercase` actions require Prometheus >= v2.36.0.
                                `DropEqual` and `KeepEqual` actions require Prometheus >= v2.41.0.


                                Default: "Replace"
                              enum:
                              - replace
                              - Replace
                              - keep
                              - Keep
                              - drop
                              - Drop
                              - hashmod
                              - HashMod
                              - labelmap
                              - LabelMap
                              - labeldrop
                              - LabelDrop
                              - labelkeep
                              - LabelKeep
                              - lowercase
                              - Lowercase
                              - uppercase
                              - Uppercase
                              - keepequal
                              - KeepEqual
                              - dropequal
                              - DropEqual
                              type: string
                            modulus:
                              description: |-
                                Modulus to take of the hash of the source label values.


                                Only applicable when the action is `HashMod`.
                              format: int64
                              type: integer
                            regex:
                              description: Regular expression against which the extracted
                                value is matched.
                              type: string
                            replacement:
                              description: |-
                                Replacement value against which a Replace action is performed if the
                                regular expression matches.


                                Regex capture groups are available.
                              type: string
                            separator:
                              description: Separator is the string between concatenated
                                SourceLabels.
                              type: string
                            sourceLabels:
                              description: |-
                                The source labels select values from existing labels. Their content is
                                concatenated using the configured Separator and matched against the
                                configured regular expression.
                              items:
                                description: |-
                                  LabelName is a valid Prometheus label name which may only contain ASCII
                                  letters, numbers, as well as underscores.
                                pattern: ^[a-zA-Z_][a-zA-Z0-9_]*$
                                type: string
                              type: array
                            targetLabel:
                              description: |-
                                Label to which the resulting string is written in a replacement.


                                It is mandatory for `Replace`, `HashMod`, `Lowercase`, `Uppercase`,
                                `KeepEqual` and `DropEqual` actions.


                                Regex capture groups are available.
                              type: string
                          type: object
                        type: array
                      podTargetLabels:
                        items:
                          type: string
                        type: array
                      relabellings:
                        items:
                          description: |-
                            RelabelConfig allows dynamic rewriting of the label set for targets, alerts,
                            scraped samples and remote write samples.


                            More info: https://prometheus.io/docs/prometheus/latest/configuration/configuration/#relabel_config
                          properties:
                            action:
                              default: replace
                              description: |-
                                Action to perform based on the regex matching.


                                `Uppercase` and `Lowercase` actions require Prometheus >= v2.36.0.
                                `DropEqual` and `KeepEqual` actions require Prometheus >= v2.41.0.


                                Default: "Replace"
                              enum:
                              - replace
                              - Replace
                              - keep
                              - Keep
                              - drop
                              - Drop
                              - hashmod
                              - HashMod
                              - labelmap
                              - LabelMap
                              - labeldrop
                              - LabelDrop
                              - labelkeep
                              - LabelKeep
                              - lowercase
                              - Lowercase
                              - uppercase
                              - Uppercase
                              - keepequal
                              - KeepEqual
                              - dropequal
                              - DropEqual
                              type: string
                            modulus:
                              description: |-
                                Modulus to take of the hash of the source label values.


                                Only applicable when the action is `HashMod`.
                              format: int64
                              type: integer
                            regex:
                              description: Regular expression against which the extracted
                                value is matched.
                              type: string
                            replacement:
                              description: |-
                                Replacement value against which a Replace action is performed if the
                                regular expression matches.


                                Regex capture groups are available.
                              type: string
                            separator:
                              description: Separator is the string between concatenated
                                SourceLabels.
                              type: string
                            sourceLabels:
                              description: |-
                                The source labels select values from existing labels. Their content is
                                concatenated using the configured Separator and matched against the
                                configured regular expression.
                              items:
                                description: |-
                                  LabelName is a valid Prometheus label name which may only contain ASCII
                                  letters, numbers, as well as underscores.
                                pattern: ^[a-zA-Z_][a-zA-Z0-9_]*$
                                type: string
                              type: array
                            targetLabel:
                              description: |-
                                Label to which the resulting string is written in a replacement.


                                It is mandatory for `Replace`, `HashMod`, `Lowercase`, `Uppercase`,
                                `KeepEqual` and `DropEqual` actions.


                                Regex capture groups are available.
                              type: string
                          type: object
                        type: array
                      scrapeTimeout:
                        description: |-
                          Duration is a valid time duration that can be parsed by Prometheus model.ParseDuration() function.
                          Supported units: y, w, d, h, m, s, ms
                          Examples: `30s`, `1m`, `1h20m15s`, `15d`
                        pattern: ^(0|(([0-9]+)y)?(([0-9]+)w)?(([0-9]+)d)?(([0-9]+)h)?(([0-9]+)m)?(([0-9]+)s)?(([0-9]+)ms)?)$
                        type: string
                    type: object
                  prometheusRule:
                    properties:
                      additionalLabels:
                        additionalProperties:
                          type: string
                        type: object
                      enabled:
                        type: boolean
                      rules:
                        items:
                          description: |-
                            Rule describes an alerting or recording rule
                            See Prometheus documentation: [alerting](https://www.prometheus.io/docs/prometheus/latest/configuration/alerting_rules/) or [recording](https://www.prometheus.io/docs/prometheus/latest/configuration/recording_rules/#recording-rules) rule
                          properties:
                            alert:
                              description: |-
                                Name of the alert. Must be a valid label value.
                                Only one of `record` and `alert` must be set.
                              type: string
                            annotations:
                              additionalProperties:
                                type: string
                              description: |-
                                Annotations to add to each alert.
                                Only valid for alerting rules.
                              type: object
                            expr:
                              anyOf:
                              - type: integer
                              - type: string
                              description: PromQL expression to evaluate.
                              x-kubernetes-int-or-string: true
                            for:
                              description: Alerts are considered firing once they
                                have been returned for this long.
                              pattern: ^(0|(([0-9]+)y)?(([0-9]+)w)?(([0-9]+)d)?(([0-9]+)h)?(([0-9]+)m)?(([0-9]+)s)?(([0-9]+)ms)?)$
                              type: string
                            keep_firing_for:
                              description: KeepFiringFor defines how long an alert
                                will continue firing after the condition that triggered
                                it has cleared.
                              minLength: 1
                              pattern: ^(0|(([0-9]+)y)?(([0-9]+)w)?(([0-9]+)d)?(([0-9]+)h)?(([0-9]+)m)?(([0-9]+)s)?(([0-9]+)ms)?)$
                              type: string
                            labels:
                              additionalProperties:
                                type: string
                              description: Labels to add or overwrite.
                              type: object
                            record:
                              description: |-
                                Name of the time series to output to. Must be a valid metric name.
                                Only one of `record` and `alert` must be set.
                              type: string
                          required:
                          - expr
                          type: object
                        type: array
                    type: object
                  resources:
                    $ref: '#/definitions/k8s.io~1api~1core~1v1~0ResourceRequirements'
                  securityContext:
                    $ref: '#/definitions/k8s.io~1api~1core~1v1~0SecurityContext'
                type: object
              nodeSelector:
                additionalProperties:
                  type: string
                type: object
              persistence:
                description: PersistenceProperties models persistence related attributes
                properties:
                  enabled:
                    type: boolean
                  extraVolumes:
                    items:
                      $ref: '#/definitions/k8s.io~1api~1core~1v1~0Volume'
                    type: array
                  size:
                    anyOf:
                    - type: integer
                    - type: string
                    pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                    x-kubernetes-int-or-string: true
                  storageClass:
                    type: string
                type: object
              podAnnotations:
                additionalProperties:
                  type: string
                type: object
              podLabels:
                additionalProperties:
                  type: string
                type: object
              podSecurityContext:
                $ref: '#/definitions/k8s.io~1api~1core~1v1~0PodSecurityContext'
              priorityClassName:
                type: string
              replicas:
                default: 1
                minimum: 1
                type: integer
              resources:
                $ref: '#/definitions/k8s.io~1api~1core~1v1~0ResourceRequirements'
              securityContext:
                $ref: '#/definitions/k8s.io~1api~1core~1v1~0SecurityContext'
              sentinel:
                description: SentinelProperties models attributes of the sentinel
                  sidecar
                properties:
                  enabled:
                    type: boolean
                  resources:
                    $ref: '#/definitions/k8s.io~1api~1core~1v1~0ResourceRequirements'
                  securityContext:
                    $ref: '#/definitions/k8s.io~1api~1core~1v1~0SecurityContext'
                type: object
              sidecars:
                items:
                  $ref: '#/definitions/k8s.io~1api~1core~1v1~0Container'
                type: array
              tls:
                description: TLSProperties models TLS settings of the redis services
                properties:
                  certManager:
                    description: CertManagerProperties models cert-manager related
                      attributes
                    properties:
                      issuer:
                        description: ObjectReference models a reference to a Kubernetes
                          object
                        properties:
                          group:
                            type: string
                          kind:
                            type: string
                          name:
                            type: string
                        type: object
                    type: object
                  enabled:
                    type: boolean
                type: object
              tolerations:
                items:
                  $ref: '#/definitions/k8s.io~1api~1core~1v1~0Toleration'
                type: array
              topologySpreadConstraints:
                items:
                  $ref: '#/definitions/k8s.io~1api~1core~1v1~0TopologySpreadConstraint'
                type: array
              version:
                type: string
            type: object
          status:
            default:
              observedGeneration: -1
            description: RedisStatus defines the observed state of Redis
            properties:
              appliedGeneration:
                format: int64
                type: integer
              conditions:
                items:
                  description: Component status Condition.
                  properties:
                    lastTransitionTime:
                      format: date-time
                      type: string
                    message:
                      type: string
                    reason:
                      type: string
                    status:
                      description: Condition Status. Can be one of 'True', 'False',
                        'Unknown'.
                      enum:
                      - "True"
                      - "False"
                      - Unknown
                      type: string
                    type:
                      description: Condition type. Currently, only the 'Ready' type
                        is used.
                      type: string
                  required:
                  - status
                  - type
                  type: object
                type: array
              inventory:
                items:
                  description: InventoryItem represents a dependent object managed
                    by this operator.
                  properties:
                    adoptionPolicy:
                      description: Adoption policy.
                      type: string
                    applyOrder:
                      description: Apply order.
                      type: integer
                    deleteOrder:
                      description: Delete order.
                      type: integer
                    deletePolicy:
                      description: Delete policy.
                      type: string
                    digest:
                      description: Digest of the descriptor of the dependent object.
                      type: string
                    group:
                      description: API group.
                      type: string
                    kind:
                      description: API kind.
                      type: string
                    managedTypes:
                      description: Managed types.
                      items:
                        description: TypeInfo represents a Kubernetes type.
                        properties:
                          group:
                            description: API group.
                            type: string
                          kind:
                            description: API kind.
                            type: string
                          version:
                            description: API group version.
                            type: string
                        required:
                        - group
                        - kind
                        - version
                        type: object
                      type: array
                    name:
                      description: Name of the referenced object.
                      type: string
                    namespace:
                      description: Namespace of the referenced object; empty for non-namespaced
                        objects
                      type: string
                    phase:
                      description: Phase of the dependent object.
                      type: string
                    reconcilePolicy:
                      description: Reconcile policy.
                      type: string
                    status:
                      description: Observed status of the dependent object.
                      type: string
                    updatePolicy:
                      description: Update policy.
                      type: string
                    version:
                      description: API group version.
                      type: string
                  required:
                  - adoptionPolicy
                  - applyOrder
                  - deleteOrder
                  - deletePolicy
                  - digest
                  - group
                  - kind
                  - name
                  - reconcilePolicy
                  - updatePolicy
                  - version
                  type: object
                type: array
              lastAppliedAt:
                format: date-time
                type: string
              lastObservedAt:
                format: date-time
                type: string
              observedGeneration:
                format: int64
                type: integer
              processingDigest:
                type: string
              processingSince:
                format: date-time
                type: string
              state:
                description: Component state. Can be one of 'Ready', 'Pending', 'Processing',
                  'DeletionPending', 'Deleting', 'Error'.
                enum:
                - Ready
                - Pending
                - Processing
                - DeletionPending
                - Deleting
                - Error
                type: string
            required:
            - observedGeneration
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
